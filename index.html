<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link data-trunk rel="copy-dir" href="assets" />
    <link data-trunk rel="inline" href="build/web/styles.css" />
</head>

<body>
    <link data-trunk rel="inline" href="build/web/sound.js" />
    <script>

        let setup = false;

        document.documentElement.addEventListener('click', requestFullScreen, false);
        document.addEventListener('fullscreenchange', toggleOrientation, false);

        function toggleOrientation() {
            if (document.fullscreenElement) {
                window.screen.orientation.lock('landscape').then(
                    success => console.log("rotated"),
                    failure => console.log("no rotate")
                )
            }
            else {
                window.screen.orientation.unlock();
            }
        }

        function requestFullScreen() {
            if (!document.fullscreenElement) {
                if (!setup) {
                    setupFullscreen();
                }
                document.querySelector("#container").requestFullscreen();
            }
        }

        function setupFullscreen() {
            setup = true;
            let container = document.createElement('div');
            container.setAttribute('id', 'container');
            document.body.appendChild(container);
            container.appendChild(document.querySelector("canvas"));
        }
    </script>
</body>

</html>